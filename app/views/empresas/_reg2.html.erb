<div id="registration-form app_font">
  <%= form_with(model: @objeto, url: register_path, data: { turbo: false }) do |form| %>

    <% if @objeto.errors.any? %>
      <div class="error-messages">
        <% @objeto.errors.full_messages.each do |message| %>
          <p><%= message %></p>
        <% end %>
      </div>
    <% end %>

    <%= render partial: '0p/lbld_inpts/text',  locals: { form: form, token: :rut,                 label: 'RUT de la empresa' } %>
    <%= render partial: '0p/lbld_inpts/text',  locals: { form: form, token: :razon_social,        label: 'Razón social de la empresa' } %>
    <%= render partial: '0p/lbld_inpts/text',  locals: { form: form, token: :administrador,       label: 'Nombre del administrador de la cuenta' } %>
    <%= render partial: '0p/lbld_inpts/email', locals: { form: form, token: :email_administrador, label: 'Email del administrador de la cuenta' } %>

    <%= render partial: '0p/lbld_inpts/check_box', locals: { form: form, token: :contacto,              label: 'Deseo que me contacten telefónicamente.' } %>
    <%= render partial: '0p/lbld_inpts/email',     locals: { form: form, token: :telefono,              label: 'Teléfono del administrador de la cuenta (*)' } %>
    <%= render partial: '0p/lbld_inpts/check_box', locals: { form: form, token: :informacion_comercial, label: 'Deseo información comercial de los productos.' } %>
    <%= render partial: '0p/lbld_inpts/check_box', locals: { form: form, token: :principal_usuaria,     label: 'Empresa principal o usuaria (**)' } %>

    <!-- Honeypot (campo que un humano no completa) -->
    <div class="hp-field" aria-hidden="true">
      <%= form.label :website, "Deje este campo vacío" %>
      <%= form.text_field :website, autocomplete: "off", tabindex: -1 %>
    </div>

    <!-- Timestamp de carga (para medir tiempo mínimo de llenado) -->
    <%= hidden_field_tag :form_loaded_at, Time.current.to_i %>

    <div class="mb-2 objt_lnk" style="font-size: 0.7rem;line-height: 1.5;">
      (*) El número telefónico se utilizará como medio de contacto sólo si ha solicitado contacto telefónico.<br>
      (**) Marque esta opción si su empresa cumple el rol de empresa principal o usuaria.
    </div>

    <div class="actions">
      <%= form.submit "Registrar mi empresa", class: "btn btn-sm btn-outline-primary" %>
    </div>
  <% end %>
</div>

<style>
/* Oculta sin usar display:none */
.hp-field {
  position: absolute !important;
  left: -10000px !important;
  top: auto !important;
  width: 1px !important;
  height: 1px !important;
  overflow: hidden !important;
}
</style>
